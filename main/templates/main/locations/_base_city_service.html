{% extends 'base.html' %}
{% load static %}

{% block title %}{{ city_meta.title }}{% endblock %}
{% block meta_description %}{{ city_meta.description }}{% endblock %}
{% block meta_keywords %}{{ city_meta.keywords }}{% endblock %}

{% block structured_data %}
{{ block.super }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Service",
  "name": "{{ service_data.name }} in {{ city.name }}, {{ city.state_name }}",
  "description": "Expert {{ service_data.description|lower }} in {{ city.name }}, {{ city.state_name }}",
  "provider": {
    "@type": "Person",
    "name": "Christopher Skerritt",
    "honorificSuffix": "M.Ed, MBA, CRC, CLCP, ABVE/F, CVE, FVE, IPEC, REAS, CEAS I, MSCC, QRC",
    "jobTitle": "{{ service_data.job_title }}",
    "telephone": "+1-203-605-2814",
    "email": "chris@skerritteconomics.com"
  },
  "areaServed": {
    "@type": "City",
    "name": "{{ city.name }}",
    "containedInPlace": {
      "@type": "State",
      "name": "{{ city.state_name }}"
    }
  },
  "geo": {
    "@type": "GeoCoordinates",
    "latitude": {{ city.latitude }},
    "longitude": {{ city.longitude }}
  },
  "offers": {
    "@type": "Offer",
    "name": "Free Case Consultation",
    "description": "Initial consultation for {{ service_data.name|lower }} cases"
  }
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "Do you provide {{ service_data.name|lower }} services in {{ city.name }}, {{ city.state_abbr }}?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, Christopher Skerritt provides comprehensive {{ service_data.name|lower }} services to attorneys and insurance companies throughout {{ city.name }} and {{ city.county }}, {{ city.state_name }}."
      }
    },
    {
      "@type": "Question",
      "name": "What {{ service_data.services_question }} do you provide for {{ city.name }} cases?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "{{ service_data.services_answer }} for {{ city.name }} litigation cases."
      }
    },
    {
      "@type": "Question",
      "name": "How quickly can you complete analysis for {{ city.name }} cases?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Standard turnaround is 2-3 weeks from receipt of complete documentation. Rush service available for urgent {{ city.name }} cases within 5-7 business days."
      }
    }
  ]
}
</script>
{% endblock %}

{% block content %}
<div class="w-full px-4">
  <!-- Hero Section -->
  <section class="hero-section bg-primary text-white py-5">
    <div class="container mx-auto px-4">
      <!-- Breadcrumbs -->
      <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumbs bg-transparent p-0 mb-0">
          <li class="">
            <a href="{% url 'home' %}" class="text-base-content">
              <i class="fas fa-home" aria-hidden="true"></i> Home
            </a>
          </li>
          <li class="">
            <a href="{% url 'services_index' %}" class="text-base-content">Services</a>
          </li>
          <li class="">
            <a href="{{ service_data.service_url }}" class="text-base-content">{{ service_data.name }}</a>
          </li>
          <li class="">
            <a href="{{ state_service_url }}" class="text-base-content">{{ city.state_name }}</a>
          </li>
          <li class="active text-base-content" aria-current="page">
            {{ city.name }}
          </li>
        </ol>
      </nav>

      <div class="flex flex-wrap -mx-4 items-center">
        <div class="col-lg-8">
          <h1 class="display-4 mb-3">{{ service_data.name }} in {{ city.name }}, {{ city.state_name }}</h1>
          <p class="text-xl text-gray-600 mb-4">
            Expert {{ service_data.description|lower }} and court testimony for attorneys throughout 
            {{ city.county }} and {{ city.state_name }}. Over 20 years of litigation support experience.
          </p>
          
          <!-- Primary CTAs -->
          <div class="flex flex-wrap gap-3">
            <a href="tel:+12036052814" class="btn btn btn-warning btn-lg px-4 py-2">
              <i class="fas fa-phone" aria-hidden="true"></i> (203) 605-2814
            </a>
            <a href="{% url 'contact' %}?city={{ city.name }}&service={{ service_data.slug }}" class="btn btn-outline-light btn-lg px-4 py-2">
              <i class="fas fa-calendar-check" aria-hidden="true"></i> Free Consultation
            </a>
          </div>
        </div>
        
        <div class="lg:w-1/3 px-4">
          <div class="text-center">
            <div class="bg-white text-neutral p-4 rounded-lg shadow-xl">
              <h3 class="text-lg font-medium mb-3">Quick Facts</h3>
              <ul class="list-none text-start mb-0">
                <li class="mb-2">
                  <i class="fas fa-check text-success mr-2" aria-hidden="true"></i>
                  Court-qualified expert witness
                </li>
                <li class="mb-2">
                  <i class="fas fa-check text-success mr-2" aria-hidden="true"></i>
                  15+ professional certifications
                </li>
                <li class="mb-2">
                  <i class="fas fa-check text-success mr-2" aria-hidden="true"></i>
                  Nationwide testimony available
                </li>
                <li class="mb-0">
                  <i class="fas fa-check text-success mr-2" aria-hidden="true"></i>
                  Same-day response guaranteed
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <div class="container mx-auto px-4 my-5">
    <div class="flex flex-wrap -mx-4">
      <div class="col-lg-8">
        <!-- Service Overview for City -->
        <section class="mb-5">
          <h2 class="text-2xl font-semibold mb-4">{{ service_data.name }} Services in {{ city.name }}</h2>
          <div class="card bg-base-100 shadow-xl border-0 shadow">
            <div class="card-body p-4">
              <p>
                Christopher Skerritt provides comprehensive {{ service_data.name|lower }} services to legal professionals 
                throughout <strong>{{ city.name }}</strong> and <strong>{{ city.county }}</strong>, {{ city.state_name }}. 
                Our {{ service_data.calculations }} are backed by rigorous methodology and extensive court experience.
              </p>
            </div>
          </div>
        </section>

        <!-- Service Categories -->
        <section class="mb-5">
          <div class="flex flex-wrap -mx-4">
            {% for category in service_data.city_categories %}
            <div class="md:w-1/2 px-4 mb-4">
              <div class="card bg-base-100 shadow-xl h-full border-0 shadow">
                <div class="card-body">
                  <h4 class="text-lg font-medium text-primary mb-3">
                    <i class="{{ category.icon }}" aria-hidden="true"></i>
                    {{ category.title }}
                  </h4>
                  <ul class="mb-0">
                    {% for item in category.items %}
                    <li class="mb-1">{{ item }}</li>
                    {% endfor %}
                  </ul>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
        </section>

        <!-- Expert Qualifications -->
        <section class="mb-5">
          <h2 class="text-2xl font-semibold mb-4">Why {{ city.name }} Attorneys Choose Christopher Skerritt</h2>
          <div class="card bg-base-100 shadow-xl border-0 shadow">
            <div class="card-body p-4">
              <div class="flex flex-wrap -mx-4">
                <div class="md:w-1/2 px-4">
                  <h4 class="h6 text-primary mb-3">Education & Experience</h4>
                  <ul class="list-none">
                    <li class="mb-2">
                      <i class="fas fa-graduation-cap text-primary mr-2" aria-hidden="true"></i>
                      <strong>M.Ed</strong> - Springfield College
                    </li>
                    <li class="mb-2">
                      <i class="fas fa-graduation-cap text-primary mr-2" aria-hidden="true"></i>
                      <strong>MBA Healthcare Leadership</strong> - Bryant University
                    </li>
                    <li class="mb-2">
                      <i class="fas fa-clock text-primary mr-2" aria-hidden="true"></i>
                      <strong>20+ years</strong> litigation support experience
                    </li>
                    <li class="mb-0">
                      <i class="fas fa-award text-primary mr-2" aria-hidden="true"></i>
                      <strong>President-Elect</strong> - American Rehabilitation Economics Association
                    </li>
                  </ul>
                </div>
                <div class="md:w-1/2 px-4">
                  <h4 class="h6 text-primary mb-3">Professional Certifications</h4>
                  <div class="flex flex-wrap gap-2">
                    <span class="badge bg-primary">CRC</span>
                    <span class="badge bg-primary">CLCP</span>
                    <span class="badge bg-primary">ABVE/F</span>
                    <span class="badge bg-primary">CVE</span>
                    <span class="badge bg-primary">FVE</span>
                    <span class="badge bg-primary">IPEC</span>
                    <span class="badge bg-primary">REAS</span>
                    <span class="badge bg-primary">+8 More</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Local Market Knowledge -->
        <section class="mb-5">
          <h2 class="text-2xl font-semibold mb-4">{{ city.name }} Economic Data & Labor Market Analysis</h2>
          <p class="mb-4">
            Accurate {{ service_data.name|lower }} requires deep understanding of local economic conditions. 
            Our {{ city.name }} {{ service_data.calculations }} incorporate:
          </p>
          <div class="flex flex-wrap -mx-4">
            <div class="md:w-1/3 px-4 mb-3">
              <div class="text-center p-4 bg-base-200 rounded">
                <i class="fas fa-chart-line fa-3x text-primary mb-3" aria-hidden="true"></i>
                <h5 class="h6">Local Wage Data</h5>
                <p class="mb-0">{{ city.county }} employment statistics and industry-specific wage trends</p>
              </div>
            </div>
            <div class="md:w-1/3 px-4 mb-3">
              <div class="text-center p-4 bg-base-200 rounded">
                <i class="fas fa-building fa-3x text-primary mb-3" aria-hidden="true"></i>
                <h5 class="h6">Labor Market</h5>
                <p class="mb-0">{{ city.state_name }} employment conditions and job availability analysis</p>
              </div>
            </div>
            <div class="md:w-1/3 px-4 mb-3">
              <div class="text-center p-4 bg-base-200 rounded">
                <i class="fas fa-dollar-sign fa-3x text-primary mb-3" aria-hidden="true"></i>
                <h5 class="h6">Cost of Living</h5>
                <p class="mb-0">Regional adjustments for {{ city.name }} area living costs</p>
              </div>
            </div>
          </div>
        </section>

        <!-- Case Types -->
        <section class="mb-5">
          <h2 class="text-2xl font-semibold mb-4">Types of Cases We Handle in {{ city.name }}</h2>
          <div class="flex flex-wrap -mx-4">
            {% for case_type in service_data.city_case_types %}
            <div class="md:w-1/3 px-4 mb-3">
              <div class="card bg-base-100 shadow-xl h-full border-0 shadow">
                <div class="card-body text-center">
                  <i class="{{ case_type.icon }} fa-3x case_type.color mb-3" aria-hidden="true"></i>
                  <h5 class="h6">{{ case_type.title }}</h5>
                  <p class="mb-0">{{ case_type.description|replace:"CITY_NAME":city.name|replace:"COUNTY":city.county }}</p>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
        </section>

        <!-- FAQ Section -->
        <section class="mb-5">
          <h2 class="text-2xl font-semibold mb-4">Frequently Asked Questions - {{ city.name }} {{ service_data.name }}</h2>
          <div class="accordion" id="faqAccordion">
            <div class="accordion-item border-0 shadow mb-2">
              <h3 class="accordion-header" id="faq1">
                <button class="accordion-button" type="button" 
                    data-bs-toggle="collapse" 
                    data-bs-target="#faqAnswer1"
                    aria-expanded="true" 
                    aria-controls="faqAnswer1">
                  Do you provide testimony in {{ city.name }} courts?
                </button>
              </h3>
              <div id="faqAnswer1" 
                                 class="accordion-collapse collapse show" 
                                 aria-labelledby="faq1"
                                 data-bs-parent="#faqAccordion">
                <div class="accordion-body">
                  Yes, we provide expert witness testimony in {{ city.county }} courts and throughout {{ city.state_name }}. 
                  Both in-person and remote testimony options are available.
                </div>
              </div>
            </div>
            
            <div class="accordion-item border-0 shadow mb-2">
              <h3 class="accordion-header" id="faq2">
                <button class="accordion-button collapsed" type="button" 
                    data-bs-toggle="collapse" 
                    data-bs-target="#faqAnswer2"
                    aria-expanded="false" 
                    aria-controls="faqAnswer2">
                  How quickly can you complete a {{ city.name }} case analysis?
                </button>
              </h3>
              <div id="faqAnswer2" 
                                 class="accordion-collapse collapse" 
                                 aria-labelledby="faq2"
                                 data-bs-parent="#faqAccordion">
                <div class="accordion-body">
                  Standard turnaround is 2-3 weeks from receipt of complete documentation. 
                  Rush service available for urgent {{ city.name }} cases within 5-7 business days.
                </div>
              </div>
            </div>
            
            <div class="accordion-item border-0 shadow">
              <h3 class="accordion-header" id="faq3">
                <button class="accordion-button collapsed" type="button" 
                    data-bs-toggle="collapse" 
                    data-bs-target="#faqAnswer3"
                    aria-expanded="false" 
                    aria-controls="faqAnswer3">
                  What makes your economic analysis reliable?
                </button>
              </h3>
              <div id="faqAnswer3" 
                                 class="accordion-collapse collapse" 
                                 aria-labelledby="faq3"
                                 data-bs-parent="#faqAccordion">
                <div class="accordion-body">
                  Our analysis follows established {{ service_data.name|lower }} methodology, incorporates local data, 
                  and is backed by extensive court experience and professional certifications.
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>

      <!-- Sidebar -->
      <div class="lg:w-1/3 px-4">
        <div class="sticky-top" style="top: 20px;">
          <!-- Contact Card -->
          <div class="card bg-base-100 shadow-xl border-primary shadow mb-4">
            <div class="card-header bg-primary text-white text-center">
              <h3 class="text-lg font-medium mb-0">
                <i class="fas fa-phone" aria-hidden="true"></i>
                Free {{ city.name }} Consultation
              </h3>
            </div>
            <div class="card-body text-center">
              <p class="text-xl text-gray-600 mb-3">Get expert {{ service_data.description|lower }} for your case</p>
              
              <div class="mb-3">
                <img src="{% static 'images/christopher-skerritt.webp' %}" 
                                     alt="Christopher Skerritt"
                                     class="rounded-full mb-2"
                                     width="80" 
                                     height="80"
                                     loading="lazy">
                <h4 class="h6 mb-1">Christopher Skerritt</h4>
                <p class="text-gray-500 small mb-3">M.Ed, MBA, CRC, CLCP, ABVE/F</p>
              </div>
              
              <div class="d-grid gap-2">
                <a href="tel:+12036052814" class="btn btn btn-primary">
                  <i class="fas fa-phone" aria-hidden="true"></i> (203) 605-2814
                </a>
                <a href="mailto:chris@skerritteconomics.com" class="btn btn btn-outline btn-primary">
                  <i class="fas fa-envelope" aria-hidden="true"></i> Email Expert
                </a>
                <a href="{% url 'contact' %}?city={{ city.name }}&service={{ service_data.slug }}" class="btn btn btn-secondary">
                  <i class="fas fa-calendar-check" aria-hidden="true"></i> Request Consultation
                </a>
              </div>
            </div>
          </div>

          <!-- Complete Services -->
          <div class="card bg-base-100 shadow-xl border-0 shadow mb-4">
            <div class="card-header bg-base-200">
              <h3 class="h6 mb-0">Our Complete Services</h3>
            </div>
            <div class="card-body">
              <ul class="list-none mb-0">
                {% for service in service_data.all_services %}
                <li class="mb-2">
                  <a href="{{ service.url }}" class="text-decoration-none">
                    <i class="{{ service.icon }}" aria-hidden="true"></i>
                    {{ service.name }}
                  </a>
                </li>
                {% endfor %}
              </ul>
            </div>
          </div>

          <!-- Professional Credentials -->
          <div class="card bg-base-100 shadow-xl border-0 shadow">
            <div class="card-header bg-base-200">
              <h3 class="h6 mb-0">Professional Credentials</h3>
            </div>
            <div class="card-body">
              <div class="flex flex-wrap -mx-4 text-center g-2">
                <div class="col-6">
                  <div class="border rounded p-2">
                    <strong class="block">M.Ed</strong>
                    <small class="text-gray-500">Springfield College</small>
                  </div>
                </div>
                <div class="col-6">
                  <div class="border rounded p-2">
                    <strong class="block">MBA</strong>
                    <small class="text-gray-500">Bryant University</small>
                  </div>
                </div>
                <div class="col-6">
                  <div class="border rounded p-2">
                    <strong class="block">CRC</strong>
                    <small class="text-gray-500">Certified</small>
                  </div>
                </div>
                <div class="col-6">
                  <div class="border rounded p-2">
                    <strong class="block">CLCP</strong>
                    <small class="text-gray-500">Certified</small>
                  </div>
                </div>
              </div>
              <p class="text-center text-gray-500 small mt-2 mb-0">
                +11 Additional Professional Certifications
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Nearby Cities -->
    {% if nearby_cities %}
    <section class="mt-5 py-4 bg-base-200 rounded">
      <div class="container mx-auto px-4">
        <h2 class="text-xl font-semibold text-center mb-4">Also Serving Nearby {{ city.state_name }} Cities</h2>
        <p class="text-center mb-4">Expert {{ service_data.name|lower }} services throughout {{ city.state_name }}:</p>
        <div class="flex flex-wrap -mx-4 justify-center">
          {% for nearby in nearby_cities %}
          <div class="col-lg-2 md:w-1/4 px-4 col-sm-4 col-6 mb-2">
            <a href="{% url 'city_service_page' service_slug=service_data.slug state_slug=city.state_slug city_slug=nearby.slug %}" 
                           class="btn btn btn-outline btn-primary btn-sm w-full"
                           title="{{ service_data.name }} in {{ nearby.name }}, {{ city.state_abbr }}">
              {{ nearby.name }}
            </a>
          </div>
          {% endfor %}
        </div>
      </div>
    </section>
    {% endif %}

    <!-- Call to Action -->
    <section class="cta-section bg-primary text-white py-5 mt-5 rounded">
      <div class="container mx-auto px-4 text-center">
        <div class="flex flex-wrap -mx-4 justify-center">
          <div class="col-lg-8">
            <h2 class="text-2xl font-semibold mb-3">Need Expert {{ service_data.name }} in {{ city.name }}?</h2>
            <p class="text-xl text-gray-600 mb-4">
              Get professional {{ service_data.description|lower }} from a court-qualified expert witness
            </p>
            <p class="mb-4">Serving {{ city.county }} and all of {{ city.state_name }}</p>
            <div class="flex flex-wrap justify-center gap-3">
              <a href="tel:+12036052814" class="btn btn btn-warning btn-lg">
                <i class="fas fa-phone" aria-hidden="true"></i> Call (203) 605-2814
              </a>
              <a href="{% url 'contact' %}?city={{ city.name }}&service={{ service_data.slug }}" class="btn btn-light btn-lg">
                <i class="fas fa-calendar-check" aria-hidden="true"></i> Request Free Consultation
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>
{% endblock %}
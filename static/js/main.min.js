document.addEventListener('DOMContentLoaded',function(){initNavigation();initTracking();initFormValidation()});function initNavigation(){const menuToggle=document.querySelector('.menu-toggle');const navMenu=document.querySelector('.navbar-menu');if(menuToggle){menuToggle.addEventListener('click',function(){navMenu.classList.toggle('active')})}const dropdowns=document.querySelectorAll('.has-dropdown');dropdowns.forEach(dropdown=>{const link=dropdown.querySelector('a');link.addEventListener('click',function(e){if(window.innerWidth <=768){e.preventDefault();dropdown.classList.toggle('active')}})})}function trackFormSubmission(formName){if(typeof gtag !=='undefined'){gtag('event','form_submit',{'form_name':formName})}console.log('Form submitted:',formName)}function trackPhoneClick(){if(typeof gtag !=='undefined'){gtag('event','click',{'event_category':'contact','event_label':'phone'})}console.log('Phone number clicked')}function trackEmailClick(){if(typeof gtag !=='undefined'){gtag('event','click',{'event_category':'contact','event_label':'email'})}console.log('Email clicked')}function initTracking(){const emailLinks=document.querySelectorAll('a[href^="mailto:"]');emailLinks.forEach(link=>{link.addEventListener('click',trackEmailClick)})}function initFormValidation(){const forms=document.querySelectorAll('form.needs-validation');forms.forEach(form=>{form.addEventListener('submit',function(event){if(!validateForm(form)){event.preventDefault();event.stopPropagation()}form.classList.add('was-validated')})})}function validateForm(form){let isValid=true;const requiredFields=form.querySelectorAll('[required]');requiredFields.forEach(field=>{if(!field.value.trim()){isValid=false;showFieldError(field,'This field is required')}else{clearFieldError(field)}});const emailFields=form.querySelectorAll('[type="email"]');emailFields.forEach(field=>{if(field.value && !isValidEmail(field.value)){isValid=false;showFieldError(field,'Please enter a valid email address')}});const phoneFields=form.querySelectorAll('[type="tel"]');phoneFields.forEach(field=>{if(field.value && !isValidPhone(field.value)){isValid=false;showFieldError(field,'Please enter a valid phone number')}});return isValid}function isValidEmail(email){const re=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return re.test(email)}function isValidPhone(phone){const re=/^[\d\s\-\(\)\+]+$/;return re.test(phone)&& phone.replace(/\D/g,'').length >=10}function showFieldError(field,message){const errorDiv=field.parentElement.querySelector('.error-message')|| createErrorDiv();errorDiv.textContent=message;field.parentElement.appendChild(errorDiv);field.classList.add('is-invalid')}function clearFieldError(field){const errorDiv=field.parentElement.querySelector('.error-message');if(errorDiv){errorDiv.remove()}field.classList.remove('is-invalid')}function createErrorDiv(){const div=document.createElement('div');div.className='error-message text-danger small mt-1';return div}document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener('click',function(e){e.preventDefault();const target=document.querySelector(this.getAttribute('href'));if(target){target.scrollIntoView({behavior:'smooth',block:'start'})}})});window.CalculatorUtils={formatCurrency:function(amount){return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD'}).format(amount)},formatNumber:function(num){return new Intl.NumberFormat('en-US').format(num)},calculatePresentValue:function(futureValue,rate,periods){return futureValue/Math.pow(1+rate,periods)},calculateFutureValue:function(presentValue,rate,periods){return presentValue*Math.pow(1+rate,periods)}};window.SEC={trackFormSubmission,trackPhoneClick,trackEmailClick,validateForm,CalculatorUtils:window.CalculatorUtils};
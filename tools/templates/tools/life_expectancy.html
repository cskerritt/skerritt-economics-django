{% extends 'base.html' %}
{% load static %}

{% block title %}Life Expectancy Calculator - Skerritt Economics{% endblock %}
{% block meta_description %}Calculate life expectancy, work-life expectancy, and years to final separation using official CDC and BLS data.{% endblock %}

{% block content %}
<div class="container">
  <h1>Life Expectancy Lookup Tool</h1>
  <p class="lead">Calculate life expectancy (LE), work-life expectancy (WLE), and years to final separation (YFS) based on CDC life tables and BLS data.</p>
  
  <div class="tool-calculator">
    <form id="life-expectancy-form" class="needs-validation">
      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label for="dob">Date of Birth *</label>
            <input type="date" class="form-control" id="dob" required>
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group">
            <label for="incident-date">Date of Incident/Valuation *</label>
            <input type="date" class="form-control" id="incident-date" required>
          </div>
        </div>
      </div>
      
      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label for="gender">Gender *</label>
            <select class="form-control" id="gender" required>
              <option value="">Select Gender</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
            </select>
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group">
            <label for="race">Race/Ethnicity</label>
            <select class="form-control" id="race">
              <option value="all">All Races</option>
              <option value="white">White</option>
              <option value="black">Black</option>
              <option value="hispanic">Hispanic</option>
              <option value="asian">Asian</option>
              <option value="other">Other</option>
            </select>
          </div>
        </div>
      </div>
      
      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label for="education">Education Level</label>
            <select class="form-control" id="education">
              <option value="all">All Education Levels</option>
              <option value="less-hs">Less than High School</option>
              <option value="hs">High School Graduate</option>
              <option value="some-college">Some College</option>
              <option value="bachelors">Bachelor's Degree</option>
              <option value="advanced">Advanced Degree</option>
            </select>
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group">
            <label for="work-status">Work Status</label>
            <select class="form-control" id="work-status">
              <option value="active">Active in Labor Force</option>
              <option value="inactive">Not in Labor Force</option>
              <option value="disabled">Disabled</option>
              <option value="retired">Retired</option>
            </select>
          </div>
        </div>
      </div>
      
      <button type="submit" class="btn btn-primary">Calculate</button>
      <button type="reset" class="btn btn-secondary">Reset</button>
    </form>
    
    <!-- Results Section -->
    <div id="results" class="calculator-results" style="display: none;">
      <h3>Calculation Results</h3>
      <table class="table">
        <tbody>
          <tr>
            <th>Age at Incident:</th>
            <td id="result-age"></td>
          </tr>
          <tr>
            <th>Life Expectancy (LE):</th>
            <td id="result-le"></td>
          </tr>
          <tr>
            <th>Work Life Expectancy (WLE):</th>
            <td id="result-wle"></td>
          </tr>
          <tr>
            <th>Years to Final Separation (YFS):</th>
            <td id="result-yfs"></td>
          </tr>
        </tbody>
      </table>
      
      <div class="alert alert-info mt-2">
        <strong>Note:</strong> These calculations are based on statistical averages from CDC and BLS data. Individual circumstances may vary significantly. Professional consultation is recommended for case-specific analysis.
      </div>
      
      <button onclick="window.print()" class="btn btn-secondary">Print Results</button>
      <button onclick="downloadResults()" class="btn btn-secondary">Download PDF</button>
    </div>
  </div>
  
  <div class="card mt-3">
    <h3>About This Tool</h3>
    <p>This calculator uses the following data sources:</p>
    <ul>
      <li><strong>Life Expectancy:</strong> CDC National Vital Statistics Reports (latest available)</li>
      <li><strong>Work-Life Expectancy:</strong> BLS Worklife Estimates</li>
      <li><strong>Years to Final Separation:</strong> Calculated based on retirement patterns and mortality</li>
    </ul>
    <p><strong>Important:</strong> Results are statistical estimates for general populations. Individual assessments should consider specific health conditions, occupation, and other relevant factors.</p>
  </div>
  
  <div class="text-center mt-3">
    <a href="{% url 'tools:index' %}" class="btn btn-secondary">‚Üê Back to Tools</a>
    <a href="{% url 'contact' %}" class="btn btn-primary">Request Professional Analysis</a>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/calculators/life_expectancy.js' %}"></script>
{% endblock %}